{"ast":null,"code":"import _objectSpread from\"/home/jozef/Desktop/venv/react/mynotes/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/jozef/Desktop/venv/react/mynotes/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/jozef/Desktop/venv/react/mynotes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/jozef/Desktop/venv/react/mynotes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useParams,Link}from\"react-router-dom\";import{ReactComponent as ArrowLeft}from\"../assets/arrow-left.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(_ref){var history=_ref.history;var params=useParams();// vervanger van match.params.id\nvar noteId=params.id;var NotesUrl=\"http://127.0.0.1:8080/notes/\";console.log(\"NOTEID:\",noteId);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(noteId===\"new\")){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"https://kluisjeslijst.up.railway.app/notes/\".concat(noteId,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}},_callee);}));return function getNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"https://kluisjeslijst.up.railway.app/notes/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(_objectSpread(_objectSpread({},note),{},{updated:new Date()}))});case 2:case\"end\":return _context2.stop();}},_callee2);}));return function createNote(){return _ref3.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://127.0.0.1:5000/notes/\".concat(noteId,\"/\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},note),{},{'updated':new Date()}))});case 2:case\"end\":return _context3.stop();}},_callee3);}));return function updateNote(){return _ref4.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:fetch(\"http://localhost:8080/notes/\".concat(noteId,\"/\"),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"}});history.push(\"/\");case 2:case\"end\":return _context4.stop();}},_callee4);}));return function deleteNote(){return _ref5.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!==\"new\"&&!note.body){deleteNote();}else if(noteId!==\"new\"){updateNote();}else if(noteId==='new'&&note!==null){createNote();}history.push('/');};var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{body:value});});console.log(\"Handle Change:\",note);};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})})}),noteId!==\"new\"?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","ReactComponent","ArrowLeft","NotePage","history","params","noteId","id","NotesUrl","console","log","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","updated","Date","updateNote","deleteNote","push","handleSubmit","handleChange","value","e","target"],"sources":["/home/jozef/Desktop/venv/react/mynotes/src/pages/NotePage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { ReactComponent as ArrowLeft } from \"../assets/arrow-left.svg\";\n\nconst NotePage = ({ history }) => {\n  const params = useParams(); // vervanger van match.params.id\n  let noteId = params.id;\n  let NotesUrl = \"http://127.0.0.1:8080/notes/\";\n  console.log(\"NOTEID:\", noteId);\n  let [note, setNote] = useState(null);\n\n  useEffect(() => {\n    getNote();\n  }, [noteId]);\n\n  let getNote = async () => {\n    if (noteId === \"new\") return;\n\n    let response = await fetch(`https://kluisjeslijst.up.railway.app/notes/${noteId}/`);\n    let data = await response.json();\n    setNote(data);\n  };\n\n  let createNote = async () => {\n    await fetch(`https://kluisjeslijst.up.railway.app/notes/`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ ...note, updated: new Date() }),\n    });\n  };\n\n  const updateNote = async () => {\n    await fetch(`http://127.0.0.1:5000/notes/${noteId}/`, {\n        method: 'PUT',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ ...note, 'updated': new Date() })\n    })\n}\n\n  let deleteNote = async () => {\n    fetch(`http://localhost:8080/notes/${noteId}/`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    history.push(\"/\");\n  };\n\n  let handleSubmit = () => {\n    if (noteId !== \"new\" && !note.body) {\n        deleteNote()\n    } else if (noteId !== \"new\") {\n        updateNote()\n    } else if (noteId === 'new' && note !== null) {\n        createNote()\n    }\n\n    history.push('/')\n}\n\n  let handleChange = (value) => {\n    setNote((note) => ({ ...note, body: value }));\n    console.log(\"Handle Change:\", note);\n  };\n\n  return (\n    <div className=\"note\">\n      <div className=\"note-header\">\n        <h3>\n          <Link to=\"/\">\n            <ArrowLeft onClick={handleSubmit} />\n          </Link>\n        </h3>\n        {noteId !== \"new\" ? (\n          <button onClick={deleteNote}>Delete</button>\n        ) : (\n          <button onClick={handleSubmit}>Done</button>\n        )}\n      </div>\n      <textarea\n        onChange={(e) => {\n          handleChange(e.target.value);\n        }}\n        value={note?.body}\n      ></textarea>\n    </div>\n  );\n};\n\nexport default NotePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}