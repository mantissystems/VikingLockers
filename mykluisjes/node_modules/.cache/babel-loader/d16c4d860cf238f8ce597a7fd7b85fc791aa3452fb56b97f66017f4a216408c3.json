{"ast":null,"code":"import _objectSpread from\"/home/jozef/Desktop/venv/kluisjeslijst/mykluisjes/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/jozef/Desktop/venv/kluisjeslijst/mykluisjes/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/jozef/Desktop/venv/kluisjeslijst/mykluisjes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/jozef/Desktop/venv/kluisjeslijst/mykluisjes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams,Link}from\"react-router-dom\";import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';// https://django-react-notesapp-master-production.up.railway.app\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(_ref){var history=_ref.history;var params=useParams();// vervanger van match.params.id\nvar noteId=params.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/notes/\".concat(noteId,\"/\"));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}},_callee);}));return function getNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:fetch(\"/notes/\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context2.stop();}},_callee2);}));return function createNote(){return _ref3.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:fetch(\"/notes/\".concat(noteId,\"/\"),{method:\"PUT\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 1:case\"end\":return _context3.stop();}},_callee3);}));return function updateNote(){return _ref4.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:fetch(\"/notes/\".concat(noteId,\"/\"),{method:'DELETE','headers':{'Content-Type':'application/json'}});history.push('/');case 2:case\"end\":return _context4.stop();}},_callee4);}));return function deleteNote(){return _ref5.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!=='new'&&note.body===''){deleteNote();}else if(noteId!=='new'){updateNote();}else if(noteId==='new'&&note.body!==null){createNote();}history.push('/');};var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{'body':value});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","ReactComponent","ArrowLeft","NotePage","history","params","noteId","id","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","updateNote","deleteNote","push","handleSubmit","handleChange","value","e","target"],"sources":["/home/jozef/Desktop/venv/kluisjeslijst/mykluisjes/src/pages/NotePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useParams,Link } from \"react-router-dom\";\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\n// https://django-react-notesapp-master-production.up.railway.app\nconst NotePage = ({  history }) => {\n    const params = useParams(); // vervanger van match.params.id\n    let noteId = params.id;\n    let [note, setNote] = useState(null)\n\n    useEffect(() => {\n        getNote();\n      }, [noteId]);\n\n\n    let getNote = async () => {\n        if (noteId === 'new') return\n\n        let response = await fetch(`/notes/${noteId}/`)\n        let data = await response.json()\n        setNote(data)\n    }\n\n    let createNote = async () => {\n        fetch(`/notes/`, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(note)\n        })\n    }\n\n\n    let updateNote = async () => {\n        fetch(`/notes/${noteId}/`, {\n            method: \"PUT\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(note)\n        })\n    }\n\n\n    let deleteNote = async () => {\n        fetch(`/notes/${noteId}/`, {\n            method: 'DELETE',\n            'headers': {\n                'Content-Type': 'application/json'\n            }\n        })\n        history.push('/')\n    }\n\n    let handleSubmit = () => {\n        if (noteId !== 'new' && note.body === '') {\n            deleteNote()\n        } else if (noteId !== 'new') {\n            updateNote()\n        } else if (noteId === 'new' && note.body !== null) {\n            createNote()\n        }\n        history.push('/')\n    }\n\n    let handleChange = (value) => {\n        setNote(note => ({ ...note, 'body': value }))\n    }\n\n    return (\n        <div className=\"note\" >\n        <div className=\"note-header\">\n            <h3>\n                <Link to=\"/\">\n                <ArrowLeft onClick={handleSubmit} />\n                </Link>\n            </h3>\n            {noteId !== 'new' ? (\n                <button onClick={deleteNote}>Delete</button>\n            ) : (\n                <button onClick={handleSubmit}>Done</button>\n            )}\n\n        </div>\n        <textarea onChange={(e) => { handleChange(e.target.value) }} value={note?.body}></textarea>\n    </div>\n    )\n}\n\nexport default NotePage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}